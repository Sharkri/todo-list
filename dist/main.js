(()=>{"use strict";const e=function(){const e=c("todos"),t=c("projects");for(const e of t)e.addTodo=r(e.todos);function o(e,t){localStorage.setItem(e,JSON.stringify(t))}function c(e){return JSON.parse(localStorage.getItem(e))||[]}function n(t,o,c,n){return e.push({title:t,description:o,dueDate:c,priority:n}),d(),{title:t,description:o,dueDate:c,priority:n}}function r(e){return function(t,o,c,r){const s=n(t,o,c,r);e.push(s),d()}}function d(){o("projects",t),o("todos",e)}return{createTodo:n,createProject:function(e){const o=[],c=r(o);return t.push({name:e,todos:o,addTodo:c}),d(),{name:e,todos:o,addTodo:c}},removeProject:function(o){t.splice(o,1),function(){e.length=0;for(const o of t)for(const t of o.todos)e.push(t)}(),d()},getTodos:()=>e,getProjects:()=>t,getProject:e=>(console.log("getproject func",e,t),t[e])}}();!function(){const t=document.querySelector(".modal"),o=document.querySelector(".modal-form"),c=document.querySelector(".add-todo-form"),n=document.querySelector(".add-project-modal"),r=document.querySelector(".add-todo-modal"),d=document.querySelector(".delete-modal"),s=document.querySelectorAll(".cancel"),l=document.querySelector(".submit"),i=document.querySelector(".submit-todo"),a=document.querySelector(".delete"),u=document.querySelector(".open-project > svg"),m=document.querySelector(".projects"),p=document.querySelector(".add-todo"),g=document.querySelector(".todos"),f=document.querySelector(".projectTab"),v=document.querySelectorAll(".links div"),L=document.querySelector(".hamburger"),y=document.querySelector(".sidebar");for(let t of e.getProjects())h(t.name);function S(e,t=[]){document.querySelector(".main-header").textContent=e,g.textContent="";for(const e of t)g.appendChild(H(e.title))}function h(e){const t=document.createElement("div"),o=document.createElement("div"),c=document.createElement("button");t.classList.add("project"),o.classList.add("project-left"),c.classList.add("project-right");const n=b("M5,9.5L7.5,14H2.5L5,9.5M3,4H7V8H3V4M5,20A2,2 0 0,0 7,18A2,2 0 0,0 5,16A2,2 0 0,0 3,18A2,2 0 0,0 5,20M9,5V7H21V5H9M9,19H21V17H9V19M9,13H21V11H9V13Z","currentColor"),r=document.createElement("span");r.textContent=e,r.classList.add("project-title");const d=b("M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z","currentColor");d.classList.add("delete-svg"),o.appendChild(n),o.appendChild(r),c.appendChild(d),t.appendChild(o),t.appendChild(c),m.appendChild(t)}function q(e){let t=document.createElement("option");return t.textContent=e,t.value=e,t}function j(){const e=document.querySelector(".active");console.log(e),e.classList.remove("active"),console.log("err")}function C(){t.classList.remove("open");for(let e=0;e<t.childElementCount;e++)t.children[e].classList.remove("open")}function E(){const e=document.querySelector(".project.active");return Array.from(m.children).indexOf(e)}function b(e,t){const o=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill",t),c.setAttribute("d",e),o.appendChild(c),o}function H(e,t){const o=document.createElement("div");o.classList.add("todo");const c=document.createElement("span");c.textContent=e;const n=document.createElement("button");return n.classList.add("mark-todo-complete"),o.appendChild(n),o.appendChild(c),o}S("Inbox"),p.addEventListener("click",(o=>{c.reset(),t.classList.add("open"),r.classList.add("open");const n=document.querySelector("#project");n.innerHTML="<option value='Inbox'>Inbox</option";for(const t of e.getProjects()){let e=t.name;e.length>19&&(e=e.substring(0,19)+"...");let o=q(e);n.appendChild(o)}})),v.forEach((e=>{e.addEventListener("click",(()=>{j(),e.classList.toggle("active"),S(e.textContent)}))})),m.addEventListener("click",(o=>{o.target.closest(".project-right")&&(t.classList.add("open"),d.classList.add("open")),console.log(e.getProjects()),j(),o.target.closest(".project").classList.add("active");const c=E();console.log(c);const n=e.getProject(c);console.log({project:n}),S(n.name,n.todos)})),f.addEventListener("click",(e=>{if(e.target.contains(u))return m.classList.toggle("closed"),void u.classList.toggle("rotated");t.classList.toggle("open"),n.classList.toggle("open"),o.reset()})),s.forEach((e=>{e.addEventListener("click",C)})),l.addEventListener("click",(()=>{const t=document.querySelector("#name").value;t&&(C(),e.createProject(t),h(t))})),i.addEventListener("click",(()=>{const t=document.querySelector("#todo-title").value;if(!t)return;const o=document.querySelector("#description").value||"",c=document.querySelector("#due-date").value||"",n=document.querySelector("#priority").value,r=document.querySelector("#project").selectedIndex,d=e.getProject(r);d.addTodo(t,o,c,n,d.todos);const s=H(t);g.appendChild(s),C()})),a.addEventListener("click",(()=>{let t=document.querySelector(".inbox"),o=E(),c=m.children[o];e.removeProject(o),m.removeChild(c),C(),S("Inbox"),t.classList.add("active")})),L.addEventListener("click",(()=>{document.querySelector("body").classList.toggle("sidebar-hidden"),y.classList.toggle("hidden")}))}()})();